{
  "@context": "https://ksnlabs.dev/ontology/",
  "@type": "EngramManifest",
  "version": "2.0.0",
  "purpose": "Track system state across epochs. Any session can validate health by comparing disk state against this manifest.",

  "currentEpoch": {
    "id": "epoch-003",
    "name": "compact-operational",
    "declared": "2026-02-25T08:30:00Z",
    "declaredBy": "opus46-web-epoch003-001",
    "description": "Compact encoding becomes primary format (~70% token savings). JSON files retained as .audit suffix for human review. Engram system transitions from infrastructure project to operational tool supporting actual IGS project work.",
    "previousEpoch": "epoch-002"
  },

  "epochs": [
    {
      "id": "epoch-001",
      "name": "initial-setup",
      "range": "2026-02-13 to 2026-02-16",
      "description": "Project creation, git integration, engram system bootstrapped, OCRITD initial commit. Ended when bootstrap failures revealed need for systematic overhaul.",
      "ksnlabsCommit": "87cde32"
    },
    {
      "id": "epoch-002",
      "name": "bootstrap-hardening",
      "range": "2026-02-16 to 2026-02-25",
      "description": "Bootstrap corrected, checkpoint workflow added, manifest system introduced, learnings consolidated. Engram v2.0.0 overhaul: session registry, W007 gravity check, archive activation, compact encoding designed. Closed with commit 85c2503.",
      "ksnlabsCommit": "85c2503"
    },
    {
      "id": "epoch-003",
      "name": "compact-operational",
      "range": "2026-02-25 to present",
      "description": "Compact encoding primary. Engram is operational infrastructure, not the project itself. Focus shifts to IGS deliverables: aggdb, OCRITD, ITD workflows.",
      "ksnlabsCommit": "pending"
    }
  ],

  "authoritative_files": {
    "bootstrap": {
      "desktop_autoload": {
        "file": "CLAUDE.md",
        "location": "C:\\dev\\.claude\\CLAUDE.md",
        "deployFrom": "C:\\dev\\ksnlabs\\bootstrap\\.claude\\CLAUDE.md"
      },
      "startup_config": {
        "file": "claude_start.json",
        "location": "C:\\dev\\claude_start.json",
        "deployFrom": "C:\\dev\\ksnlabs\\bootstrap\\claude_start.json",
        "machineSpecific": true
      },
      "verify_file": {
        "file": ".CLAUDE_VERIFY",
        "location": "C:\\dev\\.CLAUDE_VERIFY",
        "deployFrom": "C:\\dev\\ksnlabs\\bootstrap\\.CLAUDE_VERIFY"
      }
    },
    "engram": {
      "buffer": {
        "file": "buffer",
        "location": "C:\\dev\\ksnlabs\\.ai\\buffer",
        "format": "compact (ENCODING.md v1.0)",
        "audit": "C:\\dev\\ksnlabs\\.ai\\buffer.jsonld.audit"
      },
      "learnings": {
        "file": "consolidated_epoch-003",
        "location": "C:\\dev\\ksnlabs\\engram\\learnings\\consolidated_epoch-003",
        "format": "compact (ENCODING.md v1.0)",
        "audit": "C:\\dev\\ksnlabs\\engram\\learnings\\consolidated_epoch-002.json.audit",
        "nextId": "L024"
      },
      "workflows": {
        "file": "2026-02-16_session-and-git-workflows.json",
        "location": "C:\\dev\\ksnlabs\\engram\\workflows\\2026-02-16_session-and-git-workflows.json",
        "format": "JSON (compact conversion deferred — workflow structure benefits from readability)",
        "note": "Convert to compact when workflow count exceeds 15"
      },
      "encoding_spec": {
        "file": "ENCODING.md",
        "location": "C:\\dev\\ksnlabs\\.ai\\ENCODING.md",
        "role": "Compact format specification. Read this to parse buffer and learnings."
      },
      "archive": {
        "file": "engram.jsonld",
        "location": "C:\\dev\\ksnlabs\\.ai\\engram.jsonld",
        "format": "JSON-LD (archive retains structured format for indexed search)"
      },
      "manifest": {
        "file": "manifest.json",
        "location": "C:\\dev\\ksnlabs\\engram\\manifest.json",
        "role": "This file. System state tracker."
      }
    },
    "sessionRegistry": {
      "file": "session-registry.json",
      "location": "C:\\dev\\ksnlabs\\engram\\session-registry.json"
    },
    "taskQueue": {
      "file": "todo.json",
      "location": "C:\\dev\\todo.json"
    }
  },

  "contextLoadingSequence": {
    "note": "Updated for epoch-003 compact format. Budget ~4000 tokens (down from ~8000).",
    "step1": {"file": ".ai/ENCODING.md", "tokens": "~300", "purpose": "Learn compact format (skip if already known)"},
    "step2": {"file": ".ai/buffer", "tokens": "~500", "purpose": "Hot context: what we were doing, what comes next"},
    "step3": {"file": "todo.json", "tokens": "~500", "purpose": "Actionable task queue"},
    "step4": {"file": "engram/learnings/consolidated_epoch-003", "tokens": "~1500", "purpose": "Hard-won knowledge"},
    "step5": {"file": "engram/session-registry.json", "tokens": "~500 (scan recent)", "purpose": "Who came before"},
    "step6": {"file": "engram/workflows/latest", "tokens": "~1000", "purpose": "Proven procedures"},
    "lazyLoad": ".ai/engram.jsonld — only if buffer+learnings insufficient"
  },

  "health_check": {
    "quick_check": [
      "udc:read_file C:\\dev\\claude_start.json",
      "udc:read_file C:\\dev\\ksnlabs\\.ai\\buffer",
      "udc:read_file C:\\dev\\ksnlabs\\engram\\manifest.json",
      "udc:read_file C:\\dev\\ksnlabs\\engram\\learnings\\consolidated_epoch-003",
      "udc:list_directory C:\\dev\\ksnlabs\\engram\\session-handovers"
    ]
  },

  "failsafe": {
    "trigger": "User says 'wake up' or 'bootstrap'",
    "action": "tool_search('filesystem windows execute command'), then read claude_start.json",
    "ifEverythingBroken": "Read _AI_ORIENTATION.md from Claude project settings. Clone from GitHub. Rebuild."
  }
}
