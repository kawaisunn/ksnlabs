{
  "handoff_metadata": {
    "session_id": "lumo-build-narrative-architecture-001",
    "date": "2026-03-01",
    "interface": "claude.ai_web_mcp",
    "model": "claude-opus-4.6",
    "context_state": "~90% consumed"
  },
  "accomplishments": [
    "Fixed Lumo Electron build (PATH fix for git, process termination for file locks)",
    "Generated IGS_Progress_Narrative_20260301.docx - 12pg formal report, zero AI refs",
    "Generated IGS_WorkingPaper_20260301.docx - grey paper for PhD audience, methodology focus",
    "Created task_runner.ps1 - 6-task script (GitPush, DoksnRename, KeywrdInit, KeywrdMSI, CaitLFS, SyncPrep)",
    "Created Rebecca_Task_SiteEntry.md - DB population work (NOT document cataloging)",
    "Recorded critical pipeline architecture decisions L051-L058"
  ],
  "CRITICAL_ARCHITECTURE": {
    "pipeline": {
      "stage1_doksn": "Raw files -> structured JSON (header/body/footer). MUST PRESERVE TABLES as array-of-row-arrays. Tables contain test results that map directly to DB records.",
      "stage2_keywrd": "Reads ONLY .json body. NEVER header. Hard boundary. Eliminates false positives from calculated/derivative/path data. Deterministic keywords, domain vocab matching, SimHash dedup, confidence tiers.",
      "stage3_cait": "Reads full JSON + keywrd output. Date standardization (appends inline, never modifies raw). PLSS standardization (appends inline). Entity classification (Person/Company/Lab/ITD exec/Address/Agency). Header keywords written to END of file included in counts. Tag schema population. Quality log (low-confidence files for human review). Proficiency samples (curated good outputs for calibration).",
      "stage4_db_population": "Not yet built. Depends on stable 1-3."
    },
    "deployment_model": {
      "IT_impact": "ZERO. Not on IT list. No servers, services, ports.",
      "install": "MSIX (MSI for dev). Double-click, agree to licenses, watch install + tutorial video, run test job.",
      "training": "Chris delivers full ITD training: Doksn processing, DB access, web maps, map building."
    },
    "table_preservation": "CRITICAL. Test result tables, QAMS matrices, commodity specs, material properties. Tables ARE the data. Flattening destroys cell relationships. Doksn must detect and preserve tabular structures.",
    "keywrd_body_only": "HARD CONSTRAINT. keywrd processes EXCLUSIVELY body content. Never header. Cait handles header data. Cait passes relevant header-derived keywords to END of file for inclusion in counts."
  },
  "learnings_L051_L058": {
    "L051": "keywrd reads ONLY json body - never header. Eliminates false positives.",
    "L052": "cait appends inline, never modifies raw text. '2/15/86' gets 'Feb 15, 1986' appended.",
    "L053": "cait passes header keywords to end-of-file for counting.",
    "L054": "Table preservation in Doksn is CRITICAL. Tables map directly to DB records.",
    "L055": "Zero IT footprint - MSIX double-click install with tutorial video.",
    "L056": "Proficiency tracking: human review log + curated good samples for calibration.",
    "L057": "Don't assign humans work the software is built to do. Rebecca gets DB population, NOT document cataloging.",
    "L058": "10,000+ ITD docs at IGS. ITD estimates 10-20 years manual. Core value prop of Doksn."
  },
  "outstanding_tasks": {
    "tonight": [
      "Run: cd C:\\dev; .\\task_runner.ps1 -Task GitPush",
      "Download both .docx from claude.ai -> C:\\dev\\_DOCUMENTATION\\",
      "Delete superseded Rebecca_Task_D3_Inventory.md if it exists"
    ],
    "next_session": [
      "DoksnRename + test build + runtime test",
      "KeywrdInit + create GitHub repo + push",
      "Wire keywrd into Doksn (body-only constraint)",
      "Cait file-watcher training (not shadow mode for v1)",
      "Table preservation audit in Doksn (pdfplumber has table extraction)",
      "IGS sync (task_runner -Task SyncPrep)"
    ]
  },
  "rebecca": {
    "task": "Rebecca_Task_SiteEntry.md - DB population, QAMS verification",
    "NOT": "Document cataloging (that is Doksn's job)",
    "requires": "15-min schema demo from Chris before starting"
  },
  "lumo_status": "BUILD COMPLETE. Launch: cd C:\\dev\\lumo && npx electron .",
  "context": {
    "personal_investment": "Chris funding resources out of pocket, working >50% from home",
    "political": "AI touchy at IGS. Let results speak. Docs keep AI understated.",
    "cait_models": "~2.5GB in C:\\dev\\cait\\downloads and models. Keep local, LFS optional ($5/mo).",
    "meetings": "4 critical meetings next 4 days. Both documents ready."
  }
}
